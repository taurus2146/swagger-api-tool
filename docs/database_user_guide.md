# 数据库存储系统用户指南

## 概述

数据库存储系统是项目管理工具的核心组件，提供了高效、安全、可靠的数据存储和管理功能。本指南将帮助您了解如何使用数据库功能来管理您的项目数据。

## 主要功能

### 1. 数据库管理
- **自动初始化**: 首次启动时自动创建数据库
- **版本管理**: 自动检测和升级数据库结构
- **多数据库支持**: 支持创建和切换多个数据库
- **备份恢复**: 自动和手动备份功能

### 2. 项目数据存储
- **高效存储**: 使用SQLite数据库存储项目信息
- **快速查询**: 支持按名称、标签、路径等条件搜索
- **批量操作**: 支持批量导入、导出和删除
- **历史记录**: 记录项目操作历史

### 3. 数据安全
- **数据加密**: 敏感信息自动加密存储
- **主密码保护**: 可选的主密码保护功能
- **完整性检查**: 自动检测和修复数据损坏
- **安全删除**: 彻底删除敏感数据

## 快速开始

### 首次使用

1. **启动应用程序**
   - 首次启动时，系统会自动创建默认数据库
   - 数据库文件位置：`用户文档/ProjectManager/database.db`

2. **数据迁移**（如果从旧版本升级）
   - 系统会自动检测旧的JSON数据文件
   - 提示是否进行数据迁移
   - 迁移过程中会保留原始数据作为备份

3. **基本设置**
   - 打开"设置" → "数据库设置"
   - 配置数据库路径和备份选项
   - 设置主密码（可选）

### 基本操作

#### 创建项目
1. 点击"新建项目"按钮
2. 填写项目信息：
   - 项目名称（必填）
   - 项目路径（必填）
   - 项目描述（可选）
   - 项目标签（可选）
3. 点击"保存"完成创建

#### 搜索项目
1. 使用顶部搜索框
2. 支持的搜索方式：
   - 按项目名称搜索
   - 按标签搜索
   - 按路径搜索
   - 模糊匹配搜索

#### 管理项目
- **编辑项目**: 双击项目或右键选择"编辑"
- **删除项目**: 右键选择"删除"，确认后删除
- **导出项目**: 选择项目后点击"导出"
- **批量操作**: 使用Ctrl/Shift选择多个项目

## 高级功能

### 数据库设置

#### 访问数据库设置
- 菜单：工具 → 数据库设置
- 或者：设置 → 数据库

#### 基本设置
- **数据库路径**: 选择数据库文件存储位置
- **自动备份**: 启用/禁用自动备份功能
- **备份频率**: 设置自动备份间隔
- **最大备份数**: 设置保留的备份文件数量

#### 高级设置
- **连接池大小**: 调整数据库连接池大小
- **查询超时**: 设置数据库查询超时时间
- **缓存大小**: 调整内存缓存大小
- **WAL模式**: 启用/禁用WAL模式以提高性能

### 多数据库管理

#### 创建新数据库
1. 打开"数据库设置"
2. 点击"新建数据库"
3. 选择数据库文件位置
4. 输入数据库名称
5. 点击"创建"

#### 切换数据库
1. 打开"数据库切换"菜单
2. 从列表中选择要切换的数据库
3. 确认切换操作
4. 系统会自动保存当前数据并切换

#### 数据库列表管理
- **重命名数据库**: 右键选择"重命名"
- **删除数据库**: 右键选择"删除"（谨慎操作）
- **导入数据库**: 点击"导入"选择数据库文件
- **导出数据库**: 选择数据库后点击"导出"

### 数据备份与恢复

#### 自动备份
- **启用自动备份**: 在数据库设置中启用
- **备份频率**: 可设置为每日、每周或每月
- **备份位置**: 默认在数据库同目录的backup文件夹
- **备份命名**: 自动按时间戳命名

#### 手动备份
1. 打开"数据库设置"
2. 点击"立即备份"
3. 选择备份文件保存位置
4. 输入备份文件名
5. 点击"备份"开始

#### 数据恢复
1. 打开"数据库设置"
2. 点击"恢复数据"
3. 选择要恢复的备份文件
4. 选择恢复选项：
   - 完全恢复：替换当前所有数据
   - 合并恢复：将备份数据合并到当前数据
5. 确认恢复操作

### 数据加密

#### 设置主密码
1. 打开"安全设置"
2. 点击"设置主密码"
3. 输入新密码（建议使用强密码）
4. 确认密码
5. 设置密码提示（可选）

#### 加密选项
- **自动加密**: 敏感字段自动加密
- **加密算法**: 使用AES-256加密
- **密钥管理**: 密钥安全存储和管理
- **加密范围**: 可选择加密的数据类型

#### 密码管理
- **修改密码**: 在安全设置中修改
- **重置密码**: 使用安全问题重置
- **密码提示**: 设置密码提示信息
- **自动锁定**: 设置自动锁定时间

## 性能优化

### 查询优化
- **索引使用**: 系统自动创建和维护索引
- **查询缓存**: 启用查询结果缓存
- **分页查询**: 大量数据时使用分页显示
- **异步操作**: 后台执行耗时操作

### 内存管理
- **缓存策略**: LRU缓存算法
- **内存限制**: 设置最大内存使用量
- **垃圾回收**: 定期清理无用数据
- **连接池**: 复用数据库连接

### 存储优化
- **数据压缩**: 自动压缩存储数据
- **定期清理**: 清理临时文件和日志
- **碎片整理**: 定期整理数据库文件
- **空间回收**: 删除数据后回收空间

## 故障排除

### 常见问题

#### 数据库连接失败
**症状**: 启动时提示"无法连接到数据库"
**解决方案**:
1. 检查数据库文件是否存在
2. 检查文件权限是否正确
3. 检查磁盘空间是否充足
4. 尝试重新创建数据库

#### 数据库损坏
**症状**: 数据显示异常或程序崩溃
**解决方案**:
1. 使用"数据库诊断"工具检查
2. 尝试自动修复功能
3. 从备份恢复数据
4. 重建数据库索引

#### 性能问题
**症状**: 查询速度慢或界面卡顿
**解决方案**:
1. 检查数据库大小和记录数
2. 清理无用数据和历史记录
3. 调整缓存大小设置
4. 重建数据库索引

#### 数据迁移问题
**症状**: 从旧版本升级时数据丢失
**解决方案**:
1. 检查原始JSON文件是否存在
2. 手动运行迁移工具
3. 检查迁移日志文件
4. 联系技术支持

### 诊断工具

#### 数据库健康检查
1. 打开"工具" → "数据库诊断"
2. 点击"健康检查"
3. 查看检查结果和建议
4. 根据建议进行优化

#### 性能分析
1. 启用性能监控
2. 运行一段时间后查看报告
3. 分析慢查询和瓶颈
4. 根据分析结果优化设置

#### 日志分析
- **错误日志**: 查看系统错误信息
- **操作日志**: 查看用户操作记录
- **性能日志**: 查看性能统计信息
- **调试日志**: 开发调试信息

## 最佳实践

### 数据管理
1. **定期备份**: 建议启用自动备份
2. **合理分类**: 使用标签对项目分类
3. **及时清理**: 定期删除无用项目
4. **数据验证**: 定期检查数据完整性

### 安全建议
1. **使用强密码**: 主密码应包含字母、数字和符号
2. **定期更换**: 建议定期更换主密码
3. **备份加密**: 备份文件也应加密存储
4. **访问控制**: 限制数据库文件访问权限

### 性能建议
1. **适量数据**: 避免存储过多无用数据
2. **合理设置**: 根据硬件配置调整设置
3. **定期维护**: 定期运行数据库维护工具
4. **监控性能**: 关注性能指标变化

### 备份策略
1. **多重备份**: 本地备份 + 云端备份
2. **版本管理**: 保留多个版本的备份
3. **定期测试**: 定期测试备份恢复功能
4. **异地存储**: 重要数据异地备份

## 技术规格

### 系统要求
- **操作系统**: Windows 7+, macOS 10.12+, Linux
- **内存**: 最低512MB，推荐2GB+
- **存储**: 最低100MB可用空间
- **Python**: 3.7+ (如果从源码运行)

### 数据库规格
- **数据库引擎**: SQLite 3.31+
- **文件格式**: .db (SQLite数据库文件)
- **最大数据库大小**: 281TB (理论上限)
- **最大记录数**: 无限制
- **并发支持**: 多读单写

### 支持的数据类型
- **文本**: UTF-8编码的字符串
- **数字**: 整数和浮点数
- **日期时间**: ISO 8601格式
- **布尔值**: True/False
- **JSON**: 结构化数据
- **二进制**: 文件和图片数据

## 更新日志

### 版本 2.0.0
- 新增数据库存储系统
- 支持数据迁移功能
- 添加数据加密功能
- 实现多数据库支持

### 版本 2.1.0
- 优化查询性能
- 添加自动备份功能
- 改进错误处理
- 增强安全功能

### 版本 2.2.0
- 添加数据库诊断工具
- 实现异步操作
- 优化内存使用
- 改进用户界面

## 获取帮助

### 在线资源
- **官方文档**: https://docs.projectmanager.com
- **视频教程**: https://tutorials.projectmanager.com
- **常见问题**: https://faq.projectmanager.com
- **社区论坛**: https://community.projectmanager.com

### 技术支持
- **邮件支持**: support@projectmanager.com
- **在线客服**: 工作日 9:00-18:00
- **电话支持**: +86-400-xxx-xxxx
- **远程协助**: 预约远程技术支持

### 反馈建议
- **功能建议**: feature@projectmanager.com
- **问题报告**: bugs@projectmanager.com
- **用户调研**: research@projectmanager.com
- **合作洽谈**: business@projectmanager.com

---

*本文档最后更新时间: 2024年1月*
*文档版本: 2.0*
*适用软件版本: ProjectManager 2.0+*